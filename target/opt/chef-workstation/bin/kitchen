#!/opt/chef-workstation/embedded/bin/ruby --disable-gems
#--APP_BUNDLER_BINSTUB_FORMAT_VERSION=1--
require "rubygems"

# this works around OpenSSL FIPS fingerprint matching issue where
# it expects to be loaded in image base known at compile time. We
# load OpenSSL early so that the shared library gets loaded in its
# preferred image base address
require "openssl"

begin
  # this works around rubygems/rubygems#2196 and can be removed in rubygems > 2.7.6
  require "rubygems/bundler_version_finder"
rescue LoadError
  # probably means rubygems is too old or too new to have this class, and we don't care
end

# avoid appbundling if we are definitely running within a Bundler bundle.
# most likely the check for defined?(Bundler) is enough since we don't require
# bundler above, but just for paranoia's sake also we test to see if Bundler is
# really doing its thing or not.
unless defined?(Bundler) && Bundler.instance_variable_defined?("@load")
  ENV["GEM_HOME"] = ENV["GEM_PATH"] = nil unless ENV["APPBUNDLER_ALLOW_RVM"] == "true"
  ::Gem.clear_paths

  gem "activesupport"
  gem "addressable"
  gem "appbundler"
  gem "artifactory"
  gem "ast"
  gem "aws-eventstream"
  gem "aws-partitions"
  gem "aws-sdk-account"
  gem "aws-sdk-alexaforbusiness"
  gem "aws-sdk-amplify"
  gem "aws-sdk-apigateway"
  gem "aws-sdk-apigatewayv2"
  gem "aws-sdk-applicationautoscaling"
  gem "aws-sdk-athena"
  gem "aws-sdk-autoscaling"
  gem "aws-sdk-batch"
  gem "aws-sdk-budgets"
  gem "aws-sdk-cloudformation"
  gem "aws-sdk-cloudfront"
  gem "aws-sdk-cloudhsm"
  gem "aws-sdk-cloudhsmv2"
  gem "aws-sdk-cloudtrail"
  gem "aws-sdk-cloudwatch"
  gem "aws-sdk-cloudwatchevents"
  gem "aws-sdk-cloudwatchlogs"
  gem "aws-sdk-codecommit"
  gem "aws-sdk-codedeploy"
  gem "aws-sdk-codepipeline"
  gem "aws-sdk-cognitoidentity"
  gem "aws-sdk-cognitoidentityprovider"
  gem "aws-sdk-configservice"
  gem "aws-sdk-core"
  gem "aws-sdk-costandusagereportservice"
  gem "aws-sdk-databasemigrationservice"
  gem "aws-sdk-dynamodb"
  gem "aws-sdk-ec2"
  gem "aws-sdk-ecr"
  gem "aws-sdk-ecrpublic"
  gem "aws-sdk-ecs"
  gem "aws-sdk-efs"
  gem "aws-sdk-eks"
  gem "aws-sdk-elasticache"
  gem "aws-sdk-elasticbeanstalk"
  gem "aws-sdk-elasticloadbalancing"
  gem "aws-sdk-elasticloadbalancingv2"
  gem "aws-sdk-elasticsearchservice"
  gem "aws-sdk-emr"
  gem "aws-sdk-eventbridge"
  gem "aws-sdk-firehose"
  gem "aws-sdk-glue"
  gem "aws-sdk-guardduty"
  gem "aws-sdk-iam"
  gem "aws-sdk-kafka"
  gem "aws-sdk-kinesis"
  gem "aws-sdk-kms"
  gem "aws-sdk-lambda"
  gem "aws-sdk-mq"
  gem "aws-sdk-networkfirewall"
  gem "aws-sdk-networkmanager"
  gem "aws-sdk-organizations"
  gem "aws-sdk-ram"
  gem "aws-sdk-rds"
  gem "aws-sdk-redshift"
  gem "aws-sdk-route53"
  gem "aws-sdk-route53domains"
  gem "aws-sdk-route53resolver"
  gem "aws-sdk-s3"
  gem "aws-sdk-s3control"
  gem "aws-sdk-secretsmanager"
  gem "aws-sdk-securityhub"
  gem "aws-sdk-servicecatalog"
  gem "aws-sdk-ses"
  gem "aws-sdk-shield"
  gem "aws-sdk-signer"
  gem "aws-sdk-simpledb"
  gem "aws-sdk-sms"
  gem "aws-sdk-sns"
  gem "aws-sdk-sqs"
  gem "aws-sdk-ssm"
  gem "aws-sdk-states"
  gem "aws-sdk-synthetics"
  gem "aws-sdk-transfer"
  gem "aws-sdk-waf"
  gem "aws-sigv2"
  gem "aws-sigv4"
  gem "axiom-types"
  gem "azure_graph_rbac"
  gem "azure_mgmt_compute"
  gem "azure_mgmt_key_vault"
  gem "azure_mgmt_network"
  gem "azure_mgmt_network2"
  gem "azure_mgmt_resources"
  gem "azure_mgmt_resources2"
  gem "azure_mgmt_security"
  gem "azure_mgmt_storage"
  gem "base64"
  gem "bcrypt_pbkdf"
  gem "berkshelf"
  gem "bigdecimal"
  gem "binding_of_caller"
  gem "bson", "=4.15.0"
  gem "builder"
  gem "byebug"
  gem "chef"
  gem "chef"
  gem "chef-apply"
  gem "chef-bin"
  gem "chef-cli"
  gem "chef-config"
  gem "chef-telemetry"
  gem "chef-utils"
  gem "chef-vault"
  gem "chef-zero"
  gem "chef_deprecations"
  gem "cheffish"
  gem "chefspec"
  gem "chefstyle"
  gem "citrus"
  gem "cleanroom"
  gem "coderay"
  gem "coercible"
  gem "concurrent-ruby"
  gem "connection_pool"
  gem "cookbook-omnifetch"
  gem "cookstyle"
  gem "corefoundation"
  gem "date"
  gem "debug_inspector"
  gem "declarative"
  gem "dep-selector-libgecode"
  gem "dep_selector"
  gem "descendants_tracker"
  gem "diff-lcs"
  gem "docker-api"
  gem "domain_name"
  gem "drb"
  gem "droplet_kit", "=3.19.0"
  gem "dry-configurable"
  gem "dry-container"
  gem "dry-core"
  gem "dry-inflector"
  gem "dry-logic"
  gem "dry-struct"
  gem "dry-types"
  gem "ed25519"
  gem "erubi"
  gem "erubis"
  gem "excon"
  gem "faraday"
  gem "faraday-cookie_jar"
  gem "faraday-em_http"
  gem "faraday-em_synchrony"
  gem "faraday-excon"
  gem "faraday-follow_redirects"
  gem "faraday-httpclient"
  gem "faraday-multipart"
  gem "faraday-net_http"
  gem "faraday-net_http_persistent"
  gem "faraday-patron"
  gem "faraday-rack"
  gem "faraday-retry"
  gem "faraday_middleware"
  gem "fauxhai-chef"
  gem "ffi"
  gem "ffi"
  gem "ffi"
  gem "ffi"
  gem "ffi-libarchive"
  gem "ffi-yajl", "=2.4.0"
  gem "filesize"
  gem "fog-core"
  gem "fog-json"
  gem "fog-openstack"
  gem "formatador"
  gem "fuzzyurl"
  gem "gcewinpass"
  gem "google-api-client"
  gem "googleauth"
  gem "gssapi"
  gem "guard"
  gem "gyoku"
  gem "hashdiff", "=1.0.1"
  gem "hashie"
  gem "highline", "=2.1.0"
  gem "http-accept"
  gem "http-cookie"
  gem "httpclient"
  gem "i18n"
  gem "ice_nine"
  gem "inifile"
  gem "iniparse"
  gem "inspec", "=5.22.40"
  gem "inspec-bin", "=5.22.40"
  gem "inspec-core"
  gem "ipaddress"
  gem "jmespath"
  gem "json"
  gem "jsonpath"
  gem "jwt"
  gem "k8s-ruby"
  gem "kartograph"
  gem "kitchen-ansible"
  gem "kitchen-azurerm"
  gem "kitchen-digitalocean"
  gem "kitchen-dokken"
  gem "kitchen-ec2"
  gem "kitchen-google"
  gem "kitchen-hyperv"
  gem "kitchen-inspec"
  gem "kitchen-openstack"
  gem "kitchen-vagrant"
  gem "kitchen-vcenter"
  gem "kitchen-vra"
  gem "kitchen-terraform"
  gem "knife"
  gem "knife-azure"
  gem "knife-cloud"
  gem "knife-ec2"
  gem "knife-google"
  gem "knife-tidy"
  gem "knife-vcenter"
  gem "knife-vrealize"
  gem "knife-vsphere"
  gem "knife-windows"
  gem "kramdown"
  gem "kramdown-parser-gfm"
  gem "libyajl2"
  gem "license-acceptance"
  gem "listen"
  gem "little-plugger"
  gem "lockfile"
  gem "logging"
  gem "lumberjack"
  gem "mdl"
  gem "memoist"
  gem "method_source"
  gem "mime-types"
  gem "mime-types-data"
  gem "mini_mime"
  gem "mini_portile2"
  gem "minitar"
  gem "minitest"
  gem "mixlib-archive"
  gem "mixlib-archive"
  gem "mixlib-authentication"
  gem "mixlib-cli"
  gem "mixlib-config"
  gem "mixlib-install"
  gem "mixlib-log"
  gem "mixlib-shellout"
  gem "mixlib-shellout"
  gem "mixlib-shellout"
  gem "mixlib-versioning"
  gem "molinillo"
  gem "mongo"
  gem "ms_rest"
  gem "ms_rest2"
  gem "ms_rest_azure"
  gem "ms_rest_azure2"
  gem "multi_json"
  gem "multipart-post"
  gem "mutex_m"
  gem "nenv"
  gem "net-ftp"
  gem "net-ping"
  gem "net-protocol"
  gem "net-scp"
  gem "net-sftp"
  gem "net-ssh"
  gem "net-ssh-gateway"
  gem "net-ssh-multi"
  gem "netrc"
  gem "nokogiri"
  gem "nokogiri"
  gem "nokogiri"
  gem "nokogiri"
  gem "nori"
  gem "notiffany"
  gem "octokit"
  gem "ohai"
  gem "optimist"
  gem "options"
  gem "os"
  gem "parallel"
  gem "parser"
  gem "parslet"
  gem "passwordmasker"
  gem "pastel"
  gem "plist"
  gem "progress_bar"
  gem "proxifier2"
  gem "pry"
  gem "pry-byebug"
  gem "pry-remote"
  gem "pry-stack_explorer"
  gem "public_suffix"
  gem "r18n-core"
  gem "r18n-desktop"
  gem "racc"
  gem "rack"
  gem "rainbow"
  gem "rake"
  gem "rb-fsevent"
  gem "rb-inotify"
  gem "rb-readline"
  gem "rbvmomi"
  gem "rbvmomi2"
  gem "recursive-open-struct"
  gem "regexp_parser"
  gem "representable"
  gem "resource_kit"
  gem "rest-client"
  gem "rest-client"
  gem "rest-client"
  gem "retriable"
  gem "retryable"
  gem "rexml"
  gem "rspec"
  gem "rspec-core"
  gem "rspec-expectations"
  gem "rspec-its"
  gem "rspec-mocks"
  gem "rspec-support"
  gem "rubocop"
  gem "rubocop-ast"
  gem "ruby-progressbar"
  gem "ruby-shadow"
  gem "ruby2_keywords"
  gem "rubyntlm"
  gem "rubyzip"
  gem "sawyer"
  gem "semverse"
  gem "shellany"
  gem "signet"
  gem "slop"
  gem "solve"
  gem "sshkey"
  gem "sslshake"
  gem "strings"
  gem "strings-ansi"
  gem "syslog-logger"
  gem "test-kitchen"
  gem "thor"
  gem "thread_safe"
  gem "time"
  gem "timeliness"
  gem "timeout"
  gem "to_regexp"
  gem "toml-rb"
  gem "tomlrb"
  gem "trailblazer-option"
  gem "train"
  #gem "train-aws", "=0.2.36"
  gem "train-core"
  gem "train-habitat"
  gem "train-kubernetes"
  gem "train-rest"
  gem "train-winrm"
  gem "tty-box"
  gem "tty-color"
  gem "tty-cursor"
  gem "tty-prompt"
  gem "tty-reader"
  gem "tty-screen"
  gem "tty-spinner"
  gem "tty-table"
  gem "tzinfo"
  gem "uber"
  gem "unf_ext"
  gem "unf_ext"
  gem "unicode-display_width"
  gem "unicode_utils"
  gem "uuidtools"
  gem "vault"
  gem "vcoworkflows"
  gem "virtus"
  gem "vmware-vra"
  gem "vsphere-automation-appliance"
  gem "vsphere-automation-cis"
  gem "vsphere-automation-content"
  gem "vsphere-automation-runtime"
  gem "vsphere-automation-sdk"
  gem "vsphere-automation-vapi"
  gem "vsphere-automation-vcenter"
  gem "webrick"
  gem "winrm"
  gem "winrm-elevated"
  gem "winrm-fs"
  gem "wisper"
  gem "wmi-lite"
  gem "yajl-ruby"
  gem "yaml-safe_load_stream3"
  gem "zeitwerk"
  gem "test-kitchen"
  gem "bundler" # force activation of bundler to avoid unresolved specs if there are multiple bundler versions
  spec = Gem::Specification.find_by_name("test-kitchen")
else
  spec = Gem::Specification.find_by_name("test-kitchen")
end

unless Gem::Specification.unresolved_deps.empty?
  $stderr.puts "APPBUNDLER WARNING: unresolved deps are CRITICAL performance bug, this MUST be fixed"
  Gem::Specification.reset
end

bin_file = spec.bin_file("kitchen")

Kernel.load(bin_file)
